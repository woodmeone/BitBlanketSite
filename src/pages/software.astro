---
import BaseLayout from '../layouts/BaseLayout.astro';
import CollageCard from '../components/collage/CollageCard.astro';

const software = [
  {
    name: 'VS Code',
    version: '1.85.0',
    description: 'å¼ºå¤§çš„ä»£ç ç¼–è¾‘å™¨ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€',
    platform: ['windows', 'mac', 'linux'],
    category: 'development',
    downloads: 1500,
  },
  {
    name: 'Notion',
    version: '2.0',
    description: 'å…¨èƒ½ç¬”è®°å’ŒçŸ¥è¯†ç®¡ç†å·¥å…·',
    platform: ['windows', 'mac', 'web'],
    category: 'utility',
    downloads: 1200,
  },
  {
    name: 'Figma',
    version: '2024.1',
    description: 'ä¸“ä¸šçš„UI/UXè®¾è®¡åä½œå·¥å…·',
    platform: ['windows', 'mac', 'web'],
    category: 'design',
    downloads: 800,
  },
  {
    name: 'OBS Studio',
    version: '30.0',
    description: 'å¼€æºçš„ç›´æ’­å’Œå½•å±è½¯ä»¶',
    platform: ['windows', 'mac', 'linux'],
    category: 'media',
    downloads: 600,
  },
];

const platforms = [
  { id: 'all', label: 'å…¨éƒ¨å¹³å°' },
  { id: 'windows', label: 'Windows' },
  { id: 'mac', label: 'macOS' },
  { id: 'linux', label: 'Linux' },
  { id: 'web', label: 'Web' },
];

const platformIcons: Record<string, string> = {
  windows: 'ğŸªŸ',
  mac: 'ğŸ',
  linux: 'ğŸ§',
  web: 'ğŸŒ',
};
---

<BaseLayout title="è½¯ä»¶åˆ†äº«">
  <div class="space-y-8">
    <section class="text-center py-8">
      <CollageCard rotation={-0.5} class="inline-block px-8 py-4">
        <h1 class="text-3xl md:text-4xl font-bold">è½¯ä»¶åˆ†äº«</h1>
      </CollageCard>
      <p class="text-muted-foreground mt-4 max-w-2xl mx-auto">
        ç²¾é€‰å®ç”¨è½¯ä»¶å·¥å…·ï¼Œæå‡ä½ çš„å·¥ä½œæ•ˆç‡
      </p>
    </section>

    <section class="flex flex-wrap gap-2 justify-center">
      {platforms.map((platform, index) => (
        <button class:list={['nav-item', index === 0 ? 'nav-item-active' : 'nav-item-inactive']}>
          {platform.label}
        </button>
      ))}
    </section>

    <section class="grid md:grid-cols-2 gap-6">
      {software.map((item, index) => {
        const rotation = ((index % 2) - 0.5) * 1.2;
        return (
          <CollageCard rotation={rotation} class="p-6 cursor-pointer">
            <div class="flex items-start justify-between mb-3">
              <div>
                <h2 class="text-xl font-bold">{item.name}</h2>
                <span class="text-xs text-muted-foreground">v{item.version}</span>
              </div>
              <div class="flex gap-1">
                {item.platform.map((p) => (
                  <span class="text-lg" title={p}>{platformIcons[p]}</span>
                ))}
              </div>
            </div>
            <p class="text-muted-foreground text-sm mb-4">{item.description}</p>
            <div class="flex items-center justify-between">
              <span class="text-xs text-muted-foreground">
                {item.downloads.toLocaleString()} æ¬¡ä¸‹è½½
              </span>
              <button class="nav-item nav-item-active text-sm px-3 py-1">
                ä¸‹è½½
              </button>
            </div>
          </CollageCard>
        );
      })}
    </section>

    <CollageCard rotation={-0.3} class="p-6">
      <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
        <div class="w-2 h-6 bg-accent" />
        çƒ­é—¨ä¸‹è½½
      </h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        {software.sort((a, b) => b.downloads - a.downloads).slice(0, 4).map((item, index) => (
          <div class="text-center p-3 border-2 border-primary/20">
            <div class="text-2xl font-bold text-accent mb-1">#{index + 1}</div>
            <p class="font-medium text-sm">{item.name}</p>
            <p class="text-xs text-muted-foreground">{item.downloads.toLocaleString()} æ¬¡</p>
          </div>
        ))}
      </div>
    </CollageCard>
  </div>
</BaseLayout>
